---
title: "Epic: UI for Generating CDASH CRFs"
type: "Epic"
parent: "06.05.01-initiative-dataset-generation-ui.md"
state: "backlog"
labels:
  - "crf-generation"
  - "ui"
assignees: []
---

### Description

Develop a user interface that allows users to generate Word CRF shells from the CDISC Library based on the CDASH standard. This will provide a UI for the existing `generate-cdash-crf` CLI command.

### Proposed Implementation

1.  **Refactor CLI:** Refactor the `generate_cdash_crf` command. The logic for loading IG data, handling configs, and optionally calling OpenFDA should be extracted into a reusable function.
2.  **Add API Endpoint:** Create a new `POST /api/generate-cdash-crf` endpoint. It should accept parameters like `ig_version`, `domains`, and OpenFDA options.
3.  **Update Frontend Form:** Add a new form to the UI with fields for IG Version, Domains (comma-separated), OpenFDA Drug Name, and Max OpenFDA Results.
4.  **Update Frontend Script:** Add JavaScript to handle the form submission and API call.
5.  **Add Tests:** Add a new unit test for the API endpoint, mocking the underlying generation logic.

### Acceptance Criteria

- A user can see a "Generate CDASH CRFs" section in the web UI.
- The form contains fields for IG Version, Domains, OpenFDA Drug Name, and Max OpenFDA results.
- A user can fill out the form and click "Generate".
- After generation, the UI shows a confirmation message indicating the output directory where the CRF documents were saved.
- The generated Word documents are saved in a subdirectory within `output/ui_generated_data`.
- The existing `generate_cdash_crf` CLI command continues to function correctly.
