---
title: "Epic: UI for OpenFDA Integration"
type: "Epic"
parent: "06.05.01-initiative-dataset-generation-ui.md"
state: "backlog"
labels:
  - "openfda"
  - "ui"
assignees: []
---

### Description

Develop a user interface for querying OpenFDA to populate CRF data. This will provide a UI for the `openfda populate-crf` command.

### Proposed Implementation

1.  **Refactor CLI:** Refactor the `openfda populate-crf` command to extract the core logic into a reusable function.
2.  **Add API Endpoint:** Create a new `POST /api/openfda/populate-crf` endpoint. It should accept parameters like `drug_name`, `domain`, `max_results`, etc.
3.  **Update Frontend Form:** Add a new form to the UI with fields for the OpenFDA query parameters.
4.  **Update Frontend Script:** Add JavaScript to handle the form submission and API call. The result from this API call might be a JSON response or a downloadable file, which the script should handle appropriately.
5.  **Add Tests:** Add a new unit test for the API endpoint.

### Acceptance Criteria

- A user can see an "OpenFDA Integration" section in the web UI.
- The user can enter a drug name and other query parameters (domain, max results, etc.).
- After clicking "Query", the user sees the data returned from OpenFDA, either displayed on the page (for JSON) or as a downloadable file (for CSV).
- The existing `openfda populate-crf` CLI command continues to function correctly.
